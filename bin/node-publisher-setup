#!/usr/bin/env node

const program = require('commander');
const {
  searchForIssues,
  askSetupQuestions,
  run
} = require('../src/setup');

program
  .description('Integrates node-publisher by setting up the release script in `package.json`.')
  .parse(process.argv);

(async () => {
  try {
    const issues = searchForIssues();
    const answers = await askSetupQuestions(issues);

    if (run(issues, answers)) {
      console.log('ðŸ¤˜ All set up. Now go and rock it!');
    }
  } catch (e) {
    console.error(`ERROR: ${e.message}`);
    process.exit(1);
  }
})();
